{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useEffect, useState } from 'react';\nimport * as Location from 'expo-location';\nvar Locationprops = {\n  latitude: 0,\n  longitude: 0,\n  altitude: 0,\n  accuracy: 0,\n  altitudeAccuracy: 0,\n  heading: 0,\n  speed: 0\n};\nexport var useLocation = function useLocation() {\n  var _useState = useState(Locationprops),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMsg = _useState4[0],\n      setErrorMsg = _useState4[1];\n\n  var getLocation = function getLocation() {\n    var _await$Location$reque, status, location;\n\n    return _regeneratorRuntime.async(function getLocation$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Location.requestForegroundPermissionsAsync());\n\n          case 2:\n            _await$Location$reque = _context.sent;\n            status = _await$Location$reque.status;\n\n            if (!(status !== 'granted')) {\n              _context.next = 7;\n              break;\n            }\n\n            setErrorMsg('Permission to access location was denied');\n            return _context.abrupt(\"return\");\n\n          case 7:\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n          case 9:\n            location = _context.sent;\n            setLocation(location.coords);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getLocation();\n    setInterval(getLocation, 5000);\n  }, []);\n  return {\n    location: location,\n    errorMsg: errorMsg\n  };\n};","map":{"version":3,"sources":["C:/Users/Memo/Documents/TicsExpo/definitivo/MonitoreoDeClimaCostero/ExpoTics/src/hooks/useLocation.tsx"],"names":["useEffect","useState","Location","Locationprops","latitude","longitude","altitude","accuracy","altitudeAccuracy","heading","speed","useLocation","location","setLocation","errorMsg","setErrorMsg","getLocation","requestForegroundPermissionsAsync","status","getCurrentPositionAsync","coords","setInterval"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAO,KAAKC,QAAZ,MAA0B,eAA1B;AAGA,IAAMC,aAAa,GAAG;AAClBC,EAAAA,QAAQ,EAAU,CADA;AAElBC,EAAAA,SAAS,EAAS,CAFA;AAGlBC,EAAAA,QAAQ,EAAU,CAHA;AAIlBC,EAAAA,QAAQ,EAAU,CAJA;AAKlBC,EAAAA,gBAAgB,EAAE,CALA;AAMlBC,EAAAA,OAAO,EAAW,CANA;AAOlBC,EAAAA,KAAK,EAAa;AAPA,CAAtB;AAUA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAC7B,kBAAgCV,QAAQ,CAASE,aAAT,CAAxC;AAAA;AAAA,MAAOS,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAAgCZ,QAAQ,CAAC,IAAD,CAAxC;AAAA;AAAA,MAAOa,QAAP;AAAA,MAAiBC,WAAjB;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACOd,QAAQ,CAACe,iCAAT,EADP;;AAAA;AAAA;AACVC,YAAAA,MADU,yBACVA,MADU;;AAAA,kBAEZA,MAAM,KAAK,SAFC;AAAA;AAAA;AAAA;;AAGZH,YAAAA,WAAW,CAAC,0CAAD,CAAX;AAHY;;AAAA;AAAA;AAAA,6CAMKb,QAAQ,CAACiB,uBAAT,CAAiC,EAAjC,CANL;;AAAA;AAMZP,YAAAA,QANY;AAOhBC,YAAAA,WAAW,CAACD,QAAQ,CAACQ,MAAV,CAAX;;AAPgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAUApB,EAAAA,SAAS,CAAC,YAAM;AACZgB,IAAAA,WAAW;AACXK,IAAAA,WAAW,CAACL,WAAD,EAAc,IAAd,CAAX;AACH,GAHQ,EAGN,EAHM,CAAT;AAKA,SAAO;AACHJ,IAAAA,QAAQ,EAARA,QADG;AAEHE,IAAAA,QAAQ,EAARA;AAFG,GAAP;AAIH,CAvBM","sourcesContent":["import { useEffect, useState } from 'react'\r\nimport * as Location from 'expo-location';\r\nimport { Coords } from '../interfaces/LocationInterface';\r\n\r\nconst Locationprops = {\r\n    latitude:         0,\r\n    longitude:        0,\r\n    altitude:         0,\r\n    accuracy:         0,\r\n    altitudeAccuracy: 0,\r\n    heading:          0,\r\n    speed:            0,\r\n}\r\n\r\nexport const useLocation = () => {\r\n    const [location, setLocation] = useState<Coords>(Locationprops);\r\n    const [errorMsg, setErrorMsg] = useState(null);\r\n\r\n    const getLocation = async () => {\r\n        let { status } = await Location.requestForegroundPermissionsAsync();\r\n        if (status !== 'granted') {\r\n            setErrorMsg('Permission to access location was denied');\r\n            return;\r\n        }\r\n        let location = await Location.getCurrentPositionAsync({});\r\n        setLocation(location.coords);\r\n    }\r\n\r\n    useEffect(() => {\r\n        getLocation();\r\n        setInterval(getLocation, 5000);\r\n    }, []);\r\n\r\n    return {\r\n        location,\r\n        errorMsg,\r\n    }   \r\n}\r\n"]},"metadata":{},"sourceType":"module"}
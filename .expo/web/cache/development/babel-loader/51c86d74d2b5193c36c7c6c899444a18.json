{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { styles } from \"../theme/appTheme\";\nimport { getDistance } from 'geolib';\nimport { useLocation } from \"../hooks/useLocation\";\nimport useEffect from 'react';\nexport var ClimateData = function ClimateData(_ref) {\n  var channel = _ref.channel,\n      feeds = _ref.feeds;\n\n  var _useLocation = useLocation(),\n      location = _useLocation.location,\n      errorMsg = _useLocation.errorMsg;\n\n  var text = 'Waiting..';\n\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location);\n  }\n\n  var showAlert = function showAlert() {\n    return _regeneratorRuntime.async(function showAlert$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Alert.alert('Costa Peligrosa', 'Dirigase a un lugar seguro', [{\n              text: 'Cancel',\n              onPress: function onPress() {\n                return console.log('Cancel Pressed');\n              },\n              style: 'cancel'\n            }, {\n              text: 'OK',\n              onPress: function onPress() {\n                return console.log('OK Pressed');\n              }\n            }], {\n              cancelable: false\n            }));\n\n          case 3:\n            _context.next = 8;\n            break;\n\n          case 5:\n            _context.prev = 5;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var calculateDistance = function calculateDistance() {\n    var dis = getDistance({\n      latitude: channel.latitude,\n      longitude: channel.longitude\n    }, {\n      latitude: location.latitude,\n      longitude: location.longitude\n    });\n    return dis / 1000;\n  };\n\n  useEffect(function () {\n    effect;\n    return function () {\n      cleanup;\n    };\n  }, [input])(function () {\n    getLocation();\n    setInterval(getLocation, 1000);\n  }, []);\n\n  if (parseFloat(feeds.field3) >= 15 || parseFloat(feeds.field3) <= 9) {\n    showAlert();\n  }\n\n  return React.createElement(View, {\n    style: styles.globalMargin\n  }, React.createElement(View, {\n    style: styles.channelData\n  }, React.createElement(Text, {\n    style: styles.title\n  }, channel.description), React.createElement(Text, {\n    style: styles.title\n  }, \"Distancia del equipo: \", calculateDistance(), \" Km\")), React.createElement(View, {\n    style: styles.feedData\n  }, React.createElement(Text, {\n    style: styles.title\n  }, \"Latitud: \", channel.latitude), React.createElement(Text, {\n    style: styles.title\n  }, \"Longitud: \", channel.longitude), React.createElement(Text, {\n    style: styles.feedDataText\n  }, \"Temperatura: \", feeds.field5, \"\\xB0C\"), React.createElement(Text, {\n    style: styles.feedDataText\n  }, \"Humedad: \", feeds.field6, \"%\"), React.createElement(Text, {\n    style: styles.feedDataText\n  }, \"Nivel de Agua Maximo: \", feeds.field1, \" Cm\"), React.createElement(Text, {\n    style: styles.feedDataText\n  }, \"Nivel de Agua Minimo: \", feeds.field2, \" Cm\"), React.createElement(Text, {\n    style: styles.feedDataText\n  }, \"Nivel de Agua Promedio: \", feeds.field3, \" Cm\"), React.createElement(Text, {\n    style: styles.feedDataText\n  }, \"Vientos: \", feeds.field4, \" Km/h\"), React.createElement(Text, {\n    style: styles.feedDataText\n  }, text)));\n};","map":{"version":3,"sources":["C:/Users/Memo/Documents/TicsExpo/definitivo/MonitoreoDeClimaCostero/ExpoTics/src/components/ClimateData.tsx"],"names":["React","styles","getDistance","useLocation","useEffect","ClimateData","channel","feeds","location","errorMsg","text","JSON","stringify","showAlert","Alert","alert","onPress","console","log","style","cancelable","calculateDistance","dis","latitude","longitude","effect","cleanup","input","getLocation","setInterval","parseFloat","field3","globalMargin","channelData","title","description","feedData","feedDataText","field5","field6","field1","field2","field4"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Channel, Feed } from '../interfaces/ClimateInterface';\r\nimport { Alert, Text, View } from 'react-native';\r\nimport { styles } from '../theme/appTheme';\r\nimport { getDistance } from 'geolib';\r\nimport { useLocation } from '../hooks/useLocation';\r\nimport useEffect from 'react';\r\n\r\n\r\ninterface ClimateDataProps { \r\n    channel: Channel;\r\n    feeds: Feed;\r\n}\r\n\r\nexport const ClimateData = ({channel, feeds}: ClimateDataProps) => {\r\n\r\n    const {location, errorMsg} = useLocation();\r\n    \r\n    let text = 'Waiting..';\r\n    if (errorMsg) {\r\n        text = errorMsg;\r\n    } else if (location) {\r\n        text = JSON.stringify(location);\r\n    }\r\n\r\n    const showAlert = async () => {\r\n        try{\r\n            await Alert.alert(\r\n                'Costa Peligrosa',\r\n                'Dirigase a un lugar seguro',\r\n                [\r\n                    {\r\n                        text: 'Cancel',\r\n                        onPress: () => console.log('Cancel Pressed'),\r\n                        style: 'cancel',\r\n                    },\r\n                    { text: 'OK', onPress: () => console.log('OK Pressed') },\r\n                ],\r\n                { cancelable: false },\r\n            );\r\n        }catch(error){\r\n            console.log(error);\r\n        }\r\n    }\r\n    \r\n    const calculateDistance = () => {\r\n        var dis = getDistance(\r\n            { latitude: channel.latitude, longitude: channel.longitude },\r\n            { latitude: location.latitude , longitude: location.longitude }   \r\n          );\r\n        return dis/1000;\r\n    }\r\n    useEffect(() => {\r\n        effect\r\n        return () => {\r\n            cleanup\r\n        }\r\n    }, [input])(() => {\r\n        getLocation();\r\n        setInterval(getLocation, 1000);\r\n    }, []);\r\n\r\n\r\n    if (parseFloat(feeds.field3)>=15 || parseFloat(feeds.field3)<=9) {\r\n        showAlert();\r\n    }\r\n\r\n    return (\r\n        <View style = {styles.globalMargin}> \r\n            <View style = {styles.channelData}>\r\n                <Text style={styles.title}>{channel.description}</Text>\r\n                <Text style={styles.title}>Distancia del equipo: {calculateDistance()} Km</Text>\r\n            </View>\r\n            <View style = {styles.feedData}>\r\n                <Text style={styles.title}>Latitud: {channel.latitude}</Text>\r\n                <Text style={styles.title}>Longitud: {channel.longitude}</Text>\r\n                \r\n\r\n                <Text style={styles.feedDataText}>Temperatura: {feeds.field5}Â°C</Text>  \r\n                <Text style={styles.feedDataText}>Humedad: {feeds.field6}%</Text> \r\n\r\n                <Text style={styles.feedDataText}>Nivel de Agua Maximo: {feeds.field1} Cm</Text> \r\n                <Text style={styles.feedDataText}>Nivel de Agua Minimo: {feeds.field2} Cm</Text>\r\n                <Text style={styles.feedDataText}>Nivel de Agua Promedio: {feeds.field3} Cm</Text>\r\n\r\n                <Text style={styles.feedDataText}>Vientos: {feeds.field4} Km/h</Text>\r\n\r\n                <Text style={styles.feedDataText}>{text}</Text>\r\n\r\n            </View>\r\n        </View>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}